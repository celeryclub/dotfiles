export PROMPT_DIRTRIM=2

# NVM
export NVM_DIR=~/.nvm
source $(brew --prefix nvm)/nvm.sh

# Docker
if docker-machine ls | grep -q 'dev.*vmwarefusion.*Running'; then
  eval $(docker-machine env dev)
else
  echo "Docker-machine: Machine ""dev"" is stopped."
fi

# Aliases
alias tower='gittower'
alias cart='carthage'
# alias s3="s3cmd"
# alias mm="middleman"
# alias swift="/Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/swift"

alias pg_start="pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start"
alias pg_stop="pg_ctl -D /usr/local/var/postgres stop -s -m fast"

alias mysql_start='brew services start mysql'
alias mysql_stop='brew services stop mysql'

# Docker
alias dc=docker-compose
alias dm=docker-machine
alias fl=flotilla
alias devenv="eval \"\$(docker-machine env dev)\""

alias hub=git

function karma() {
  result=$(echo $1 | sed 's|/|\\/|g')
  env TEST_FILTER=$result npm run karma:dev
}

alias php-sniff="git diff upstream/master --name-only  --pretty=format: --diff-filter=AM | grep '.php$' | xargs ./vendor/bin/phpcs --standard=./vendor/behance/php-sniffs/Behance/"
alias php-fix="git diff upstream/master --name-only  --pretty=format: --diff-filter=AM | grep '.php$' | xargs ./vendor/bin/phpcbf --standard=./vendor/behance/php-sniffs/Behance/ruleset.xml"
alias phpu="./vendor/bin/phpunit"
# alias gfix='git diff upstream/master --name-only  --pretty=format: --diff-filter=AM | grep '\''.php$'\'' | xargs -I{} -L 1 sh -c '\''./vendor/bin/phpmd {} text unusedcode; ./vendor/bin/phpcbf --standard=./vendor/behance/php-sniffs/Behance/ruleset.xml {}'\'''

alias om='subl $(git status --porcelain | awk '"'"'{print $2}'"'"')'
# alias om="git ls-files --modified | xargs"
